(()=>{var e={};e.id=328,e.ids=[328],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5492:(e,t,s)=>{Promise.resolve().then(s.bind(s,22451))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22451:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspace/frontend/app/doctor/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspace/frontend/app/doctor/page.tsx","default")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},41876:(e,t,s)=>{Promise.resolve().then(s.bind(s,51969))},51969:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(60687),a=s(43210),i=s(17993),n=s(41778),o=s(24934),d=s(63974),l=s(96241);function c({className:e,...t}){return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,l.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}let u=["Malaria","Typhoid","Dengue","Influenza","Common cold","COVID-19"];function p({report:e,onSubmit:t}){let[s,i]=(0,a.useState)(null),[n,l]=(0,a.useState)(void 0),[p,x]=(0,a.useState)(""),[m,f]=(0,a.useState)(!1);async function h(){if(s){f(!0);try{await t({action:s,corrected_label:"reject"===s?n:void 0,notes:p})}finally{f(!1)}}}return(0,r.jsxs)("div",{className:"border rounded p-4 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Case"}),(0,r.jsxs)("div",{className:"text-base font-medium",children:[e.predicted.label," (",Math.round(100*e.predicted.probability),"%)"]}),(0,r.jsxs)("div",{className:"text-xs",children:["Session: ",e.patient_session_id]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium mb-1",children:"Action"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(o.$,{type:"button",variant:"approve"===s?"default":"outline",className:"approve"===s?"":"bg-transparent",onClick:()=>i("approve"),children:"Approve"}),(0,r.jsx)(o.$,{type:"button",variant:"reject"===s?"default":"outline",className:"reject"===s?"":"bg-transparent",onClick:()=>i("reject"),children:"Reject"})]})]}),"reject"===s&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-sm",children:"Correct diagnosis"}),(0,r.jsxs)(d.l6,{onValueChange:e=>l(e),children:[(0,r.jsx)(d.bq,{className:"w-full",children:(0,r.jsx)(d.yv,{placeholder:"Select disease"})}),(0,r.jsx)(d.gC,{children:u.map(e=>(0,r.jsx)(d.eb,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-sm",children:"Notes (optional)"}),(0,r.jsx)(c,{value:p,onChange:e=>x(e.target.value),placeholder:"Add brief feedback"})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(o.$,{onClick:h,disabled:m||"reject"===s&&!n,"aria-live":"polite",children:m?"Saving...":"Submit"})})]})}var x=s(59556),m=s(71702),f=s(68988);function h(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0),[h,v]=(0,a.useState)(null),{toast:g}=(0,m.dj)(),[b,j]=(0,a.useState)(!1),[y,w]=(0,a.useState)(""),[N,k]=(0,a.useState)(""),[_,C]=(0,a.useState)("all");async function z(e,s){try{t(t=>t.filter(t=>t.id!==e.id)),await (0,x.Wz)(e.id,{doctor_id:"demo-doctor",action:s.action,corrected_label:s.corrected_label,notes:s.notes}),g({title:"Feedback saved"})}catch(e){g({title:"Failed to save feedback",description:e?.message??""})}}return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)(i.NavBar,{}),(0,r.jsx)("main",{className:"flex-1 p-4",children:(0,r.jsxs)("div",{className:"mx-auto max-w-3xl space-y-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Doctor Review"}),h&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:h}),b?c?(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading..."}):0===e.length?(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"No pending reports."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,r.jsx)(f.p,{placeholder:"Search by ID or diagnosis",value:N,onChange:e=>k(e.target.value)}),(0,r.jsxs)(d.l6,{value:_,onValueChange:C,children:[(0,r.jsx)(d.bq,{children:(0,r.jsx)(d.yv,{placeholder:"Priority"})}),(0,r.jsxs)(d.gC,{children:[(0,r.jsx)(d.eb,{value:"all",children:"All Priority"}),(0,r.jsx)(d.eb,{value:"high",children:"High"}),(0,r.jsx)(d.eb,{value:"medium",children:"Medium"}),(0,r.jsx)(d.eb,{value:"low",children:"Low"})]})]})]}),(0,r.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,r.jsx)(p,{report:e,onSubmit:t=>z(e,t)},e.id))})]}):(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter access code"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(f.p,{value:y,onChange:e=>w(e.target.value),placeholder:"Access code"}),(0,r.jsx)(o.$,{onClick:()=>j(y.trim().length>0),children:"Continue"})]})]})]})}),(0,r.jsx)(n.w,{})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63974:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>x,gC:()=>p,l6:()=>l,yv:()=>c});var r=s(60687);s(43210);var a=s(27846),i=s(78272),n=s(13964),o=s(3589),d=s(96241);function l({...e}){return(0,r.jsx)(a.bL,{"data-slot":"select",...e})}function c({...e}){return(0,r.jsx)(a.WT,{"data-slot":"select-value",...e})}function u({className:e,size:t="default",children:s,...n}){return(0,r.jsxs)(a.l9,{"data-slot":"select-trigger","data-size":t,className:(0,d.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n,children:[s,(0,r.jsx)(a.In,{asChild:!0,children:(0,r.jsx)(i.A,{className:"size-4 opacity-50"})})]})}function p({className:e,children:t,position:s="popper",...i}){return(0,r.jsx)(a.ZL,{children:(0,r.jsxs)(a.UC,{"data-slot":"select-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...i,children:[(0,r.jsx)(m,{}),(0,r.jsx)(a.LM,{className:(0,d.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,r.jsx)(f,{})]})})}function x({className:e,children:t,...s}){return(0,r.jsxs)(a.q7,{"data-slot":"select-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...s,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(a.VF,{children:(0,r.jsx)(n.A,{className:"size-4"})})}),(0,r.jsx)(a.p4,{children:t})]})}function m({className:e,...t}){return(0,r.jsx)(a.PP,{"data-slot":"select-scroll-up-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(o.A,{className:"size-4"})})}function f({className:e,...t}){return(0,r.jsx)(a.wn,{"data-slot":"select-scroll-down-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(i.A,{className:"size-4"})})}},68988:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(60687);s(43210);var a=s(96241);function i({className:e,type:t,...s}){return(0,r.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}},99173:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l});var r=s(65239),a=s(48088),i=s(88170),n=s.n(i),o=s(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);s.d(t,d);let l={children:["",{children:["doctor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,22451)),"/workspace/frontend/app/doctor/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"/workspace/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,56032)),"/workspace/frontend/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/workspace/frontend/app/doctor/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/doctor/page",pathname:"/doctor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,566,536,314,849,191],()=>s(99173));module.exports=r})();