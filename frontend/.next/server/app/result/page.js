(()=>{var e={};e.id=834,e.ids=[834],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5336:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8086:e=>{"use strict";e.exports=require("module")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24785:(e,s,t)=>{"use strict";t.d(s,{S:()=>i});var a=t(26787),r=t(59350);let n=()=>"session_"+Math.random().toString(36).substr(2,9)+"_"+Date.now(),i=(0,a.v)()((0,r.Zr)((e,s)=>({session:null,apiBaseUrl:null,history:[],initSession:()=>{e({session:{sessionId:n(),symptoms:{},vitals:{},demographics:{},currentQuestionIndex:0,isComplete:!1}})},updateSymptom:(t,a)=>{let{session:r}=s();r&&e({session:{...r,symptoms:{...r.symptoms,[t]:a}}})},updateVitals:t=>{let{session:a}=s();a&&e({session:{...a,vitals:{...a.vitals,...t}}})},updateDemographics:t=>{let{session:a}=s();a&&e({session:{...a,demographics:{...a.demographics,...t}}})},nextQuestion:()=>{let{session:t}=s();if(!t)return;let a=t.currentQuestionIndex+1;e({session:{...t,currentQuestionIndex:a,isComplete:a>=8}})},resetSession:()=>{e({session:null})},setApiBaseUrl:s=>{e({apiBaseUrl:s})},addDiagnosisToHistory:t=>{let a=s().session;if(!a)return null;let r=t.distribution.slice(0,3),n={id:`${a.sessionId}-${Date.now()}`,created_at:new Date().toISOString(),session_id:a.sessionId,top_label:t.top_prediction.label,top_probability:t.top_prediction.probability,top3:r,symptoms:a.symptoms,full_distribution:t.distribution,triage:t.triage,status:"pending"};return e(e=>({history:[...e.history,n]})),n}}),{name:"soma-session",partialize:e=>({session:e.session,apiBaseUrl:e.apiBaseUrl,history:e.history})}))},26230:(e,s,t)=>{Promise.resolve().then(t.bind(t,83923))},28785:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspace/frontend/app/result/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspace/frontend/app/result/page.tsx","default")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29311:(e,s,t)=>{"use strict";t.d(s,{E:()=>r});var a=t(60687);function r({report:e}){let s=e.predicted.probability<.6;return(0,a.jsxs)("div",{className:"p-6 bg-white text-black max-w-a4 w-[794px]",style:{fontFamily:"ui-sans-serif, system-ui"},children:[(0,a.jsxs)("header",{className:"mb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Soma Diagnosis Report"}),(0,a.jsxs)("p",{className:"text-sm",children:["Generated: ",new Date(e.generated_at).toLocaleString()]}),(0,a.jsxs)("p",{className:"text-xs mt-1",children:["Report ID: ",e.id]})]}),(0,a.jsxs)("section",{className:"mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Summary"}),(0,a.jsx)("p",{className:"text-sm leading-relaxed mt-1",children:e.llm_summary??"No summary available."})]}),(0,a.jsxs)("section",{className:"mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Predicted Diagnosis"}),(0,a.jsxs)("p",{className:"text-sm mt-1",children:[e.predicted.label," (",Math.round(100*e.predicted.probability),"% confidence)"]})]}),(0,a.jsxs)("section",{className:"mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Triage & Advice"}),(0,a.jsxs)("p",{className:"text-sm mt-1",children:["Triage level: ",e.triage]}),(0,a.jsx)("ul",{className:"list-disc pl-5 text-sm mt-1",children:e.advice.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]}),e.explanations&&e.explanations.length>0&&(0,a.jsxs)("section",{className:"mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Explanations"}),(0,a.jsx)("ul",{className:"list-disc pl-5 text-sm mt-1",children:e.explanations.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]}),(0,a.jsxs)("footer",{className:"mt-6 border-t pt-3",children:[(0,a.jsx)("p",{className:"text-xs font-semibold",children:"This is a suspected diagnosis. Not a final medical diagnosis."}),s&&(0,a.jsx)("p",{className:"text-xs text-red-700 mt-1",children:"Low confidence â€” consult a doctor immediately."})]})]})}},31158:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},33873:e=>{"use strict";e.exports=require("path")},59556:(e,s,t)=>{"use strict";t.d(s,{$s:()=>i,Ee:()=>p,G1:()=>u,IJ:()=>h,Lk:()=>m,Q2:()=>g,Q4:()=>c,Vp:()=>x,ZJ:()=>n,a:()=>f,ly:()=>d,oh:()=>o,qF:()=>r});let a=()=>"https://soma-6c1p.onrender.com",r=async e=>{let s=a(),t=s?`${s}/predict`:"/api/predict",r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error(`Prediction failed: ${r.statusText}`);return r.json()},n=async e=>{let s=a(),t=new URLSearchParams({labels:e.join(",")}),r=s?`${s}/diseases?${t}`:`/api/diseases?${t}`,n=await fetch(r);if(!n.ok)throw Error(`Disease info failed: ${n.statusText}`);return n.json()},i=(e,s)=>{},l=e=>{let s=a();return s?`${s}${e}`:`/api${e}`};async function o(e){if(a())try{let s=await fetch(l("/reports/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok)return s.json()}catch{}let s=await fetch("/api/reports/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error(`Report generation failed: ${s.statusText}`);return s.json()}async function c(e){let s=l(`/reports${e?`?session_id=${encodeURIComponent(e)}`:""}`),t=await fetch(s);if(t.ok)return t.json();let a=await fetch(`/api/reports${e?`?session_id=${encodeURIComponent(e)}`:""}`);if(!a.ok)throw Error(`Get reports failed: ${a.statusText}`);return a.json()}async function d(e){let s=await fetch(l(`/reports/${e}`));if(s.ok)return s.json();let t=await fetch(`/api/reports/${e}`);if(!t.ok)throw Error(`Get report failed: ${t.statusText}`);return t.json()}function x(e){try{return}catch{}}function u(){try{return[]}catch{return[]}}function m(e){return u().find(s=>s.id===e)}function p(){return u().slice(-5).reverse().slice(0,3).map(e=>({id:e.id,summary:e.llm_summary??"",predicted_label:e.predicted.label,generated_at:e.generated_at}))}async function h(){let e=a(),s=e?`${e}/doctor/diagnoses`:"/api/doctor/diagnoses",t=await fetch(s,{headers:{"x-role":"doctor"}});if(!t.ok)throw Error(`Get diagnoses failed: ${t.statusText}`);return t.json()}async function f(e){let s=a(),t=s?`${s}/doctor/diagnosis/${e}`:`/api/doctor/diagnosis/${e}`,r=await fetch(t,{headers:{"x-role":"doctor"}});if(!r.ok)throw Error(`Get diagnosis failed: ${r.statusText}`);return r.json()}async function g(e){let s=a(),t=s?`${s}/doctor/review/${e.diagnosis_id}`:`/api/doctor/review/${e.diagnosis_id}`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","x-role":"doctor"},body:JSON.stringify({status:e.action,feedback:e.notes})});if(!r.ok)throw Error(`Review failed: ${r.statusText}`);return r.json()}},59821:(e,s,t)=>{"use strict";t.d(s,{E:()=>o});var a=t(60687);t(43210);var r=t(8730),n=t(24224),i=t(96241);let l=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:s,asChild:t=!1,...n}){let o=t?r.DX:"span";return(0,a.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(l({variant:s}),e),...n})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},83923:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>J});var a=t(60687),r=t(43210),n=t(16189),i=t(17993),l=t(41778),o=t(59821),c=t(55192),d=t(43649),x=t(62688);let u=(0,x.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var m=t(5336);function p({prediction:e,className:s}){let{top_prediction:t,triage:r}=e;return(0,a.jsxs)(c.Zp,{className:s,children:[(0,a.jsxs)(c.aR,{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[(()=>{switch(r){case"high":return(0,a.jsx)(d.A,{className:"h-5 w-5 text-destructive"});case"medium":return(0,a.jsx)(u,{className:"h-5 w-5 text-accent"});case"low":return(0,a.jsx)(m.A,{className:"h-5 w-5 text-primary"});default:return(0,a.jsx)(u,{className:"h-5 w-5 text-muted-foreground"})}})(),(0,a.jsx)(o.E,{variant:(()=>{switch(r){case"high":return"destructive";case"medium":return"secondary";case"low":return"default";default:return"outline"}})(),children:(()=>{switch(r){case"high":return"High Priority";case"medium":return"Medium Priority";case"low":return"Low Priority";default:return"Unknown"}})()})]}),(0,a.jsx)(c.ZB,{className:"text-2xl",children:t.label}),(0,a.jsxs)(c.BT,{children:[(0,a.jsxs)("span",{className:"text-3xl font-bold text-primary",children:[Math.round(100*t.probability),"%"]}),(0,a.jsx)("span",{className:"text-muted-foreground ml-2",children:"confidence"})]})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-semibold text-foreground",children:"Recommendations:"}),(0,a.jsx)("ul",{className:"space-y-2",children:e.advice.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start space-x-2 text-sm",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-primary mt-2 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e})]},s))})]})})]})}var h=t(86287);function f({distribution:e,className:s}){let[t,n]=(0,r.useState)([]);return(0,a.jsxs)(c.Zp,{className:s,children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{className:"text-lg",children:"Confidence Distribution"}),(0,a.jsx)(c.BT,{children:"Probability breakdown for top conditions"})]}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("div",{className:"space-y-4",children:e.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-foreground",children:e.label}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[Math.round(100*e.probability),"%"]})]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(h.k,{value:t[s]||0,className:"h-3",style:{"--progress-background":`hsl(var(--chart-${s+1}))`}})})]},e.label))}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"These probabilities are based on your reported symptoms and should not replace professional medical evaluation."})})]})]})}let g=(0,x.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),j=(0,x.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),y=(0,x.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function v({diseaseInfo:e,className:s}){return(0,a.jsxs)(c.Zp,{className:s,children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsxs)(c.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:e.label}),e.prevalence&&(0,a.jsxs)(o.E,{variant:"outline",className:"text-xs",children:[(0,a.jsx)(g,{className:"w-3 h-3 mr-1"}),e.prevalence]})]}),(0,a.jsx)(c.BT,{children:e.description})]}),(0,a.jsxs)(c.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-sm text-foreground mb-2",children:"Common Symptoms"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.commonSymptoms.map((e,s)=>(0,a.jsx)(o.E,{variant:"secondary",className:"text-xs",children:e},s))})]}),e.duration&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,a.jsx)(j,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Typical duration: ",e.duration]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-semibold text-sm text-foreground mb-2 flex items-center space-x-1",children:[(0,a.jsx)(y,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"When to Seek Care"})]}),(0,a.jsx)("ul",{className:"space-y-1",children:e.whenToSeekCare.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start space-x-2 text-sm",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-destructive mt-2 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e})]},s))})]})]})]})}var b=t(24934),N=t(96241);function w({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"skeleton",className:(0,N.cn)("bg-accent animate-pulse rounded-md",e),...s})}let k=(0,t(24224).F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function _({className:e,variant:s,...t}){return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,N.cn)(k({variant:s}),e),...t})}function $({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"alert-description",className:(0,N.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...s})}var S=t(24785),C=t(59556),T=t(13943);let A=(0,x.A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),P=(0,x.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var R=t(71702),M=t(26134),D=t(11860);function E({...e}){return(0,a.jsx)(M.bL,{"data-slot":"dialog",...e})}function B({...e}){return(0,a.jsx)(M.ZL,{"data-slot":"dialog-portal",...e})}function I({className:e,...s}){return(0,a.jsx)(M.hJ,{"data-slot":"dialog-overlay",className:(0,N.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function q({className:e,children:s,showCloseButton:t=!0,...r}){return(0,a.jsxs)(B,{"data-slot":"dialog-portal",children:[(0,a.jsx)(I,{}),(0,a.jsxs)(M.UC,{"data-slot":"dialog-content",className:(0,N.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[s,t&&(0,a.jsxs)(M.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(D.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function O({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,N.cn)("flex flex-col gap-2 text-center sm:text-left",e),...s})}function U({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,N.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function Z({className:e,...s}){return(0,a.jsx)(M.hE,{"data-slot":"dialog-title",className:(0,N.cn)("text-lg leading-none font-semibold",e),...s})}function z({className:e,...s}){return(0,a.jsx)(M.VY,{"data-slot":"dialog-description",className:(0,N.cn)("text-muted-foreground text-sm",e),...s})}let G=(0,x.A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var L=t(31158),F=t(94424),H=t(28635);function V({open:e,onOpenChange:s,report:t,renderReportView:n,onDownloaded:i}){let l=(0,r.useRef)(null);async function o(){if(!l.current||!t)return;let e=(await (0,F.default)(l.current)).toDataURL("image/png"),s=new H.Ay("p","mm","a4");s.addImage(e,"PNG",10,10,190,0),s.save(`Soma_Report_${new Date(t.generated_at).toISOString().slice(0,10)}_${t.id}.pdf`),i?.()}return(0,a.jsx)(E,{open:e,onOpenChange:s,children:(0,a.jsxs)(q,{"aria-describedby":"report-modal-desc",children:[(0,a.jsxs)(O,{children:[(0,a.jsx)(Z,{children:"Diagnosis report sent for doctor review"}),(0,a.jsx)(z,{id:"report-modal-desc",children:"A clinician will review shortly. You can download and keep a copy now."})]}),(0,a.jsx)("div",{className:"sr-only",children:(0,a.jsx)("div",{ref:l,children:n()})}),(0,a.jsxs)(U,{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)(b.$,{asChild:!0,variant:"outline",className:"bg-transparent","aria-label":"View history",children:(0,a.jsxs)("a",{href:"/reports",children:[(0,a.jsx)(G,{className:"mr-2 h-4 w-4"})," View History"]})}),(0,a.jsxs)(b.$,{onClick:o,"aria-label":"Download report PDF",children:[(0,a.jsx)(L.A,{className:"mr-2 h-4 w-4"})," Download Report (PDF)"]})]})]})})}var W=t(29311);function J(){let e=(0,n.useRouter)(),{toast:s}=(0,R.dj)(),{session:t,resetSession:o,addDiagnosisToHistory:x}=(0,S.S)(),[u,m]=(0,r.useState)(null),[h,g]=(0,r.useState)(null),[j,y]=(0,r.useState)(!0),[N,k]=(0,r.useState)(null),[M,D]=(0,r.useState)(null),[E,B]=(0,r.useState)(!1),I=()=>{o(),e.push("/check"),(0,C.$s)("symptom_check_restarted",{from:"results"})},q=async()=>{if(u)try{await navigator.share({title:"Soma Health Check Results",text:`My symptom check suggests ${u.top_prediction.label} with ${Math.round(100*u.top_prediction.probability)}% confidence.`,url:window.location.href}),(0,C.$s)("results_shared")}catch(e){navigator.clipboard.writeText(window.location.href),s({title:"Link copied",description:"Results link copied to clipboard"})}};if(!t)return null;if(j)return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)(i.NavBar,{}),(0,a.jsx)("main",{className:"flex-1 p-4",children:(0,a.jsxs)("div",{className:"mx-auto max-w-4xl space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(w,{className:"h-8 w-64 mx-auto mb-2"}),(0,a.jsx)(w,{className:"h-4 w-48 mx-auto"})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsx)(w,{className:"h-64"}),(0,a.jsx)(w,{className:"h-64"})]})]})}),(0,a.jsx)(l.w,{})]});if(N)return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)(i.NavBar,{}),(0,a.jsx)("main",{className:"flex-1 flex items-center justify-center p-4",children:(0,a.jsxs)(c.Zp,{className:"w-full max-w-md mx-auto",children:[(0,a.jsxs)(c.aR,{className:"text-center",children:[(0,a.jsx)(d.A,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),(0,a.jsx)(c.ZB,{children:"Unable to Generate Results"}),(0,a.jsx)(c.BT,{children:"We encountered an error processing your symptoms"})]}),(0,a.jsxs)(c.Wu,{className:"space-y-4",children:[(0,a.jsxs)(_,{children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),(0,a.jsx)($,{children:N})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(b.$,{onClick:()=>window.location.reload(),className:"flex-1",children:"Try Again"}),(0,a.jsx)(b.$,{onClick:I,variant:"outline",className:"flex-1 bg-transparent",children:"Start Over"})]})]})]})}),(0,a.jsx)(l.w,{})]});if(!u)return null;let O=h?.[u.top_prediction.label];return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)(i.NavBar,{}),(0,a.jsx)("main",{className:"flex-1 p-4",children:(0,a.jsxs)("div",{className:"mx-auto max-w-4xl space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Your Health Insights"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Based on your reported symptoms"})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsx)(p,{prediction:u}),(0,a.jsx)(f,{distribution:u.distribution})]}),u.explanations&&u.explanations.length>0&&(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{className:"text-lg",children:"Why This Prediction?"}),(0,a.jsx)(c.BT,{children:"AI reasoning behind the assessment"})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)("ul",{className:"space-y-2",children:u.explanations.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start space-x-2 text-sm",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-accent mt-2 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e})]},s))})})]}),O&&(0,a.jsx)(v,{diseaseInfo:O}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,a.jsxs)(b.$,{onClick:I,variant:"outline",className:"bg-transparent",children:[(0,a.jsx)(T.A,{className:"mr-2 h-4 w-4"}),"Start New Check"]}),(0,a.jsxs)(b.$,{onClick:q,variant:"outline",className:"bg-transparent",children:[(0,a.jsx)(A,{className:"mr-2 h-4 w-4"}),"Share Results"]}),(0,a.jsxs)(b.$,{onClick:()=>{s({title:"Feature coming soon",description:"Telehealth booking will be available in a future update"}),(0,C.$s)("telehealth_booking_attempted")},className:"bg-accent hover:bg-accent/90",children:[(0,a.jsx)(P,{className:"mr-2 h-4 w-4"}),"Book Telehealth"]})]}),(0,a.jsxs)(_,{children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),(0,a.jsxs)($,{children:[(0,a.jsx)("strong",{children:"Important:"})," This tool provides informational guidance only and is not a substitute for professional medical advice, diagnosis, or treatment. Always consult a healthcare professional for medical concerns."]})]})]})}),(0,a.jsx)(l.w,{}),(0,a.jsx)(V,{open:E,onOpenChange:B,report:M,renderReportView:()=>M?(0,a.jsx)(W.E,{report:M}):(0,a.jsx)(a.Fragment,{}),onDownloaded:()=>s({title:"PDF downloaded"})})]})}},86287:(e,s,t)=>{"use strict";t.d(s,{k:()=>i});var a=t(60687);t(43210);var r=t(25177),n=t(96241);function i({className:e,value:s,...t}){return(0,a.jsx)(r.bL,{"data-slot":"progress",className:(0,n.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...t,children:(0,a.jsx)(r.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}},86478:(e,s,t)=>{Promise.resolve().then(t.bind(t,28785))},89353:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c});var a=t(65239),r=t(48088),n=t(88170),i=t.n(n),l=t(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c={children:["",{children:["result",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,28785)),"/workspace/frontend/app/result/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/workspace/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,56032)),"/workspace/frontend/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/workspace/frontend/app/result/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/result/page",pathname:"/result",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[447,566,536,16,296,849,378],()=>t(89353));module.exports=a})();