(()=>{var e={};e.id=671,e.ids=[671],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},22122:(e,r,t)=>{"use strict";let s,n;t.r(r),t.d(r,{patchFetch:()=>y,routeModule:()=>_,serverHooks:()=>b,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>m});var o={};t.r(o),t.d(o,{POST:()=>g});var i=t(96559),a=t(48088),p=t(37719),u=t(32190),c=t(77598);function d(e){!s||s.length<e?(s=Buffer.allocUnsafe(128*e),c.webcrypto.getRandomValues(s),n=0):n+e>s.length&&(c.webcrypto.getRandomValues(s),n=0),n+=e}let l=global.__SOMA_REPORTS__||{reports:[]};async function g(e){try{let r=await e.json(),t=new Date().toISOString(),o={id:function(e=21){d(e|=0);let r="";for(let t=n-e;t<n;t++)r+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&s[t]];return r}(12),patient_session_id:r.session.sessionId,generated_at:t,predicted:{label:r.predict_response.top_prediction.label,probability:r.predict_response.top_prediction.probability},distribution:r.predict_response.distribution,triage:r.predict_response.triage,advice:r.predict_response.advice,explanations:r.predict_response.explanations,llm_summary:r.recent_reports&&r.recent_reports.length>0?`Context-aware summary referencing ${r.recent_reports.length} prior report(s).`:"Concise clinical summary based on current inputs.",status:"pending"};return l.reports.push(o),u.NextResponse.json({report:o})}catch(e){return new u.NextResponse(`Error: ${e?.message??"unknown"}`,{status:400})}}global.__SOMA_REPORTS__=l;let _=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/reports/generate/route",pathname:"/api/reports/generate",filename:"route",bundlePath:"app/api/reports/generate/route"},resolvedPagePath:"/workspace/frontend/app/api/reports/generate/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:x,workUnitAsyncStorage:m,serverHooks:b}=_;function y(){return(0,p.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:m})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77598:e=>{"use strict";e.exports=require("node:crypto")},78335:()=>{},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,580],()=>t(22122));module.exports=s})();