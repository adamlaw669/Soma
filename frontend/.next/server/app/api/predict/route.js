(()=>{var e={};e.id=121,e.ids=[121],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},76353:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>h,routeModule:()=>u,serverHooks:()=>c,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var a={};t.r(a),t.d(a,{POST:()=>p});var i=t(96559),o=t(48088),s=t(37719),n=t(32190);async function p(e){try{let r=await e.json();if(!r.symptoms||"object"!=typeof r.symptoms)return n.NextResponse.json({error:"Invalid symptoms data"},{status:400});await new Promise(e=>setTimeout(e,800));let t=function(e){let{symptoms:r,vitals:t,demographics:a,meta:i}=e,o={Malaria:.4,Typhoid:.3,Flu:.3};r.fever&&r.chills&&r.headache&&(o.Malaria+=.3),r.fever&&r.body_pain&&(o.Malaria+=.2),r.fatigue&&r.fever&&(o.Malaria+=.15),r.fever&&r.diarrhea&&(o.Typhoid+=.25),r.abdominal_pain&&r.nausea&&(o.Typhoid+=.2),r.headache&&r.fatigue&&r.fever&&(o.Typhoid+=.15),r.cough&&r.sore_throat&&(o.Flu+=.3),r.body_pain&&r.headache&&!r.diarrhea&&(o.Flu+=.2),r.fatigue&&r.cough&&(o.Flu+=.15),(r.diarrhea||r.nausea)&&(o.Flu*=.7),r.cough&&r.sore_throat&&!r.chills&&(o.Malaria*=.6),t?.temperature_c&&(t.temperature_c>=39?(o.Malaria+=.1,o.Typhoid+=.05):t.temperature_c>=38&&(o.Malaria+=.05,o.Typhoid+=.03)),r.duration_gt_3d&&(o.Typhoid+=.1,o.Malaria+=.05,o.Flu*=.8);let s=Object.values(o).reduce((e,r)=>e+r,0),n=Object.entries(o).map(([e,r])=>({label:e,probability:r/s}));n.sort((e,r)=>r.probability-e.probability);let p="low",u=n[0].probability,d=t?.temperature_c&&t.temperature_c>=39,l=Object.values(r).filter(Boolean).length>=5;d||u>.7&&l?p="high":(u>.5||l)&&(p="medium");let c=function(e,r,t,a){let i=["Consult a healthcare professional for proper diagnosis.","Stay hydrated and get adequate rest.","Monitor your symptoms and temperature regularly."];if("high"===r)return["Seek immediate medical attention.","Do not delay in consulting a healthcare provider.","Consider visiting an emergency room if symptoms worsen.",...i.slice(1)];if("medium"===r)return["Schedule an appointment with your doctor within 24-48 hours.","Avoid self-medication without professional guidance.",...i];let o=[...i];return t.fever&&o.push("Use fever-reducing medication as directed by a healthcare provider."),t.diarrhea&&o.push("Maintain fluid intake to prevent dehydration."),o}(n[0].label,p,r,0),h=function(e,r,t){let a=[];return"Malaria"!==e||(r.fever&&r.chills&&a.push("High fever with chills is a classic malaria symptom pattern."),r.headache&&r.body_pain&&a.push("Headache and body aches commonly occur together in malaria."),r.cough||r.sore_throat||a.push("Absence of respiratory symptoms reduces likelihood of flu-like illnesses.")),"Typhoid"===e&&(r.fever&&r.diarrhea&&a.push("Fever with gastrointestinal symptoms suggests typhoid fever."),r.abdominal_pain&&a.push("Abdominal pain is commonly associated with typhoid fever."),r.duration_gt_3d&&a.push("Prolonged symptoms are characteristic of typhoid fever.")),"Flu"!==e||(r.cough&&r.sore_throat&&a.push("Respiratory symptoms strongly indicate influenza-like illness."),r.body_pain&&r.fatigue&&a.push("Body aches and fatigue are typical flu symptoms."),r.diarrhea||a.push("Absence of gastrointestinal symptoms supports respiratory illness.")),t?.temperature_c&&t.temperature_c>=39&&a.push("High fever (â‰¥39\xb0C) indicates a potentially serious condition requiring medical attention."),a}(n[0].label,r,t);return{top_prediction:n[0],distribution:n,triage:p,advice:c,explanations:h}}(r);return n.NextResponse.json(t)}catch(e){return console.error("Prediction API error:",e),n.NextResponse.json({error:"Internal server error"},{status:500})}}let u=new i.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/predict/route",pathname:"/api/predict",filename:"route",bundlePath:"app/api/predict/route"},resolvedPagePath:"/workspace/frontend/app/api/predict/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:c}=u;function h(){return(0,s.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}},78335:()=>{},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[447,580],()=>t(76353));module.exports=a})();