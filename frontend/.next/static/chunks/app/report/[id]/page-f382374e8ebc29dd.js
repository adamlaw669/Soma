(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{19314:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var t=a(95155),l=a(12115),i=a(35695),n=a(93831),c=a(47746),d=a(62473),r=a(97168),m=a(31886),o=a(52699),x=a.n(o),h=a(26597);function u(){let e=(0,i.useParams)(),[s,a]=(0,l.useState)(null),[o,u]=(0,l.useState)(!0),[p,j]=(0,l.useState)(null),N=(0,l.useRef)(null);async function f(){if(!N.current||!s)return;let e=(await x()(N.current)).toDataURL("image/png"),a=new h.Ay("p","mm","a4");a.addImage(e,"PNG",10,10,190,0),a.save("Soma_Report_".concat(new Date(s.generated_at).toISOString().slice(0,10),"_").concat(s.id,".pdf"))}return(0,l.useEffect)(()=>{(async function(){if(null==e?void 0:e.id)try{u(!0),j(null);let s=await (0,m.ly)(e.id);a(s)}catch(l){var s;let t=(0,m.Lk)(e.id);t?a(t):j(null!==(s=null==l?void 0:l.message)&&void 0!==s?s:"Failed to load report")}finally{u(!1)}})()},[null==e?void 0:e.id]),(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)(n.NavBar,{}),(0,t.jsx)("main",{className:"flex-1 p-4",children:(0,t.jsx)("div",{className:"mx-auto max-w-3xl space-y-4",children:o?(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading..."}):p?(0,t.jsx)("p",{className:"text-sm text-destructive",children:p}):s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Report"}),(0,t.jsx)(r.$,{onClick:f,"aria-label":"Download report",children:"Download PDF"})]}),(0,t.jsx)("div",{ref:N,className:"bg-background",children:(0,t.jsx)(d.E,{report:s})})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Report not found."})})}),(0,t.jsx)(c.w,{})]})}},32599:(e,s,a)=>{Promise.resolve().then(a.bind(a,19314))},62473:(e,s,a)=>{"use strict";a.d(s,{E:()=>l});var t=a(95155);function l(e){var s;let{report:a}=e,l=a.predicted.probability<.6;return(0,t.jsxs)("div",{className:"p-6 bg-white text-black max-w-a4 w-[794px]",style:{fontFamily:"ui-sans-serif, system-ui"},children:[(0,t.jsxs)("header",{className:"mb-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Soma Diagnosis Report"}),(0,t.jsxs)("p",{className:"text-sm",children:["Generated: ",new Date(a.generated_at).toLocaleString()]}),(0,t.jsxs)("p",{className:"text-xs mt-1",children:["Report ID: ",a.id]})]}),(0,t.jsxs)("section",{className:"mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Summary"}),(0,t.jsx)("p",{className:"text-sm leading-relaxed mt-1",children:null!==(s=a.llm_summary)&&void 0!==s?s:"No summary available."})]}),(0,t.jsxs)("section",{className:"mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Predicted Diagnosis"}),(0,t.jsxs)("p",{className:"text-sm mt-1",children:[a.predicted.label," (",Math.round(100*a.predicted.probability),"% confidence)"]})]}),(0,t.jsxs)("section",{className:"mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Triage & Advice"}),(0,t.jsxs)("p",{className:"text-sm mt-1",children:["Triage level: ",a.triage]}),(0,t.jsx)("ul",{className:"list-disc pl-5 text-sm mt-1",children:a.advice.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]}),a.explanations&&a.explanations.length>0&&(0,t.jsxs)("section",{className:"mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Explanations"}),(0,t.jsx)("ul",{className:"list-disc pl-5 text-sm mt-1",children:a.explanations.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]}),(0,t.jsxs)("footer",{className:"mt-6 border-t pt-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold",children:"This is a suspected diagnosis. Not a final medical diagnosis."}),l&&(0,t.jsx)("p",{className:"text-xs text-red-700 mt-1",children:"Low confidence â€” consult a doctor immediately."})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[316,930,33,470,874,922,373,507,441,684,358],()=>s(32599)),_N_E=e.O()}]);